<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agenda</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css" />
    <!--css-->
    <link rel="stylesheet" href="../css/estilos.css" />
    <!-- Remix Icon CSS (para los iconos) -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <!-- bootstrap css and js -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </head>

  <body>
    <div class="container p-2">
      <h1 class="bg-primary text-white text-center p-2 rounded">
        Gestion de citas - Consulta Medica
      </h1>
    </div>
    <div class="container">
      <button
        class="btn btn-primary"
        style="background-color: #007bff; border: none"
        data-bs-toggle="modal"
        data-bs-target="#nuevaCitaModal"
      >
        <i class="ri-calendar-line"></i> Nueva cita
      </button>
    </div>

    <div
      class="modal fade"
      id="nuevaCitaModal"
      tabindex="-1"
      aria-labelledby="nuevaCitaModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="nuevaCitaModalLabel">
              <i class="ri-calendar-line"></i> Nueva Cita
            </h5>
          </div>
          <div class="modal-body">
            <form>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="fechaHora" class="form-label">
                    <i class="ri-calendar-event-line"></i>
                    Fecha y Hora
                  </label>
                  <input
                    type="datetime-local"
                    class="form-control"
                    id="fechaHora"
                    name="fechaHora"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="especialidad" class="form-label">
                    <i class="ri-stethoscope-line"></i>
                    Especialidades <span class="text-danger">*</span>
                  </label>
                  <select
                    class="form-control"
                    id="especialidad"
                    name="especialidad"
                    required
                  >
                    <option selected disabled>
                      Seleccione una especialidad
                    </option>
                    <option value="1">Cardiología</option>
                    <option value="2">Dermatología</option>
                    <option value="3">Ortopedia</option>
                    <option value="4">Pediatría</option>
                    <option value="5">Ginecología</option>
                    <option value="6">Neurología</option>
                    <option value="7">Oftalmología</option>
                    <option value="8">Psiquiatría</option>
                    <option value="9">Radiología</option>
                    <option value="10">Urología</option>
                  </select>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="tiempoVisita" class="form-label">
                    <i class="ri-time-line"></i> Tiempo visita (min)
                    <span class="text-danger">*</span>
                  </label>
                  <input
                    type="number"
                    class="form-control"
                    id="tiempoVisita"
                    name="tiempoVisita"
                    value="30"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="paciente" class="form-label">
                    <i class="ri-user-line"></i>
                    Paciente <span class="text-danger">*</span>
                  </label>
                  <input type="hidden" id="pacienteId" name="pacienteId" />
                  <div class="input-group">
                    <input
                      type="text"
                      class="form-control"
                      id="paciente"
                      placeholder="Buscar paciente"
                    />
                  </div>
                </div>
              </div>

              <div id="submenuNuevaAlta" class="mb-3" style="display: none">
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="nombreAlta" class="form-label">
                      <i class="ri-user-line"></i>
                      Nombre <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="nombreAlta" />
                  </div>
                  <div class="col-md-4">
                    <label for="primerApellidoAlta" class="form-label">
                      <i class="ri-user-line"></i>
                      Primer apellido <span class="text-danger">*</span>
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="primerApellidoAlta"
                    />
                  </div>
                  <div class="col-md-4">
                    <label for="segundoApellidoAlta" class="form-label">
                      <i class="ri-user-line"></i>
                      Segundo apellido
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="segundoApellidoAlta"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="fechaNacimientoAlta" class="form-label">
                      <i class="ri-calendar-line"></i>
                      Fecha de nacimiento
                    </label>
                    <input
                      type="date"
                      class="form-control"
                      id="fechaNacimientoAlta"
                    />
                  </div>
                  <div class="col-md-4">
                    <label for="sexoAlta" class="form-label">
                      <i class="ri-user-line"></i>
                      Sexo
                    </label>
                    <select class="form-select" id="sexoAlta">
                      <option selected>Masculino</option>
                      <option>Femenino</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="pais" class="form-label">
                      <i class="ri-map-pin-line"></i>
                      País de origen/Nacionalidad
                    </label>
                    <select id="pais" class="form-control">
                      <option value disabled selected>
                        Selecciona un país
                      </option>
                    </select>
                    <input
                      type="text"
                      id="otroPais"
                      class="form-control mt-2"
                      placeholder="Escribe tu país"
                      style="display: none"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="provinciaAlta" class="form-label">
                      <i class="ri-map-pin-line"></i>
                      Provincia
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="provinciaAlta"
                      placeholder="Ingrese una provincia"
                    />
                  </div>
                  <div class="col-md-4">
                    <label for="poblacionAlta" class="form-label">
                      <i class="ri-map-pin-line"></i>
                      Población
                    </label>
                    <select class="form-select" id="poblacionAlta">
                      <option selected>Seleccione una población</option>
                      <option>Población 1</option>
                      <option>Población 2</option>
                      <option>Población 3</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="tipoDocumentoAlta" class="form-label">
                      <i class="ri-id-card-line"></i>
                      Tipo de documento
                    </label>
                    <select class="form-select" id="tipoDocumentoAlta">
                      <option selected>Seleccione un tipo</option>
                      <option>DNI</option>
                      <option>Pasaporte</option>
                      <option>NIE</option>
                    </select>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="numeroDocumentoAlta" class="form-label">
                      <i class="ri-id-card-line"></i>
                      Número de documento
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="numeroDocumentoAlta"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="direccionAlta" class="form-label">
                      <i class="ri-map-pin-line"></i>
                      Dirección
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="direccionAlta"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="codigoPostalAlta" class="form-label">
                      <i class="ri-map-pin-line"></i>
                      Código postal
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="codigoPostalAlta"
                    />
                  </div>
                  <div class="col-md-4">
                    <label for="telefonoAlta" class="form-label">
                      <i class="ri-phone-line"></i>
                      Teléfono
                    </label>
                    <input type="text" class="form-control" id="telefonoAlta" />
                  </div>
                  <div class="col-md-4">
                    <label for="movilAlta" class="form-label">
                      <i class="ri-smartphone-line"></i>
                      Móvil
                    </label>
                    <input type="text" class="form-control" id="movilAlta" />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-4">
                    <label for="emailAlta" class="form-label">
                      <i class="ri-mail-line"></i>
                      E-mail
                    </label>
                    <input type="email" class="form-control" id="emailAlta" />
                    <div class="form-check mt-2">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="mailing"
                      />
                      <label class="form-check-label" for="mailing"
                        >Mailing</label
                      >
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="procedenciaAlta" class="form-label">
                      <label for="tarifasMutuasAlta" class="form-label">
                        <i class="ri-map-pin-line"></i>Procedencia
                      </label>
                      <input
                        type="text"
                        class="form-control"
                        id="procedencia"
                        placeholder="Procedencia"
                      />
                    </label>
                  </div>
                  <div class="col-md-4">
                    <label for="tarifasMutuasAlta" class="form-label">
                      <i class="ri-money-dollar-circle-line"></i>
                      Aseguradora
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="tarifasMutuasAlta"
                      placeholder="Aseguradora"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label for="observacionesAlta" class="form-label">
                      <i class="ri-file-text-line"></i>
                      Observaciones de la cita
                    </label>
                    <textarea
                      class="form-control"
                      id="observacionesAlta"
                      name="observacionesAlta"
                      rows="3"
                    ></textarea>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="alertarObservaciones"
                      />
                      <label
                        class="form-check-label"
                        for="alertarObservaciones"
                      >
                        <i class="ri-alert-line"></i>
                        Mostrar observaciones del paciente
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="observaciones" class="form-label">
                  <i class="ri-file-text-line"></i>
                  Observaciones de la cita
                </label>
                <textarea
                  class="form-control"
                  id="observaciones"
                  name="observaciones"
                  rows="3"
                ></textarea>
              </div>

              <div class="row mb-3 text-center">
                <div class="col-md-4">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="destaca"
                    />
                    <label class="form-check-label" for="destaca">
                      <i class="ri-star-line"></i>
                      Mostrar Observaciones
                    </label>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="submit"
                  class="btn btn-success"
                  style="background-color: #00826f; border: none"
                >
                  <i class="ri-save-line"></i>
                  Guardar
                </button>

                <button
                  type="button"
                  class="btn btn-success"
                  style="background-color: #00826f; border: none"
                >
                  <i class="ri-printer-line"></i> Imprimir
                </button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  <i class="ri-close-line"></i>
                  Cerrar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="container mt-4">
      <h2>Lista de Citas Médicas</h2>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Paciente</th>
              <th>Fecha y Hora</th>
              <th>Especialidad</th>
              <th>Motivo</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for cita in citas %}
            <tr>
              <td>{{ cita.id }}</td>
              <td>{{ cita.paciente.nombre }} {{ cita.paciente.apellido }}</td>
              <td>{{ cita.fecha_hora|date:"d/m/Y H:i" }}</td>
              <td>{{ cita.medico.especialidad.nombre }}</td>
              <td>{{ cita.motivo_consulta|truncatechars:30 }}</td>
              <td>
                <span
                  class="badge {% if cita.estado == 'pendiente' %}bg-warning {% elif cita.estado == 'completada' %}bg-success {% else %}bg-secondary{% endif %}"
                >
                  {{ cita.estado|title }}
                </span>
              </td>
              <td>
                <div class="btn-group" role="group">
                  <a href="#" class="btn btn-sm btn-primary">
                    <i class="ri-edit-line"></i>
                  </a>
                  <a href="#" class="btn btn-sm btn-danger">
                    <i class="ri-delete-bin-line"></i>
                  </a>
                </div>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="text-center">
                No hay citas médicas registradas
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
